

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Nirdizati Research backend &mdash; Nirdizati Research  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Nirdizati Research frontend" href="readme_frontend.html" />
    <link rel="prev" title="Nirdizati Research" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/nirdizati-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">READMEs</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Nirdizati Research backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme_frontend.html">Nirdizati Research frontend</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">src</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Nirdizati Research</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Nirdizati Research backend</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/readme/readme_backend.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nirdizati-research-backend">
<h1>Nirdizati Research backend<a class="headerlink" href="#nirdizati-research-backend" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://opensource.org/licenses/MIT"><img alt="License" src="https://img.shields.io/badge/license-MIT-blue.svg" /></a> <a class="reference external" href="http://hits.dwyl.io/nirdizati-research/predict-react"><img alt="HitCount" src="http://hits.dwyl.io/nirdizati-research/predict-python.svg" /></a></p>
<p>Master</p>
<p><a class="reference external" href="https://travis-ci.org/nirdizati-research/predict-python"><img alt="Build Status master" src="https://travis-ci.org/nirdizati-research/predict-python.svg?branch=master" /></a> <a class="reference external" href="https://codecov.io/gh/nirdizati-research/predict-python"><img alt="Coverage Status master" src="https://codecov.io/gh/nirdizati-research/predict-python/branch/master/graph/badge.svg" /></a> <a class="reference external" href="https://lgtm.com/projects/g/nirdizati-research/predict-python/alerts/"><img alt="Total alerts master" src="https://img.shields.io/lgtm/alerts/g/nirdizati-research/predict-python.svg?logo=lgtm&amp;logoWidth=18" /></a> <a class="reference external" href="https://lgtm.com/projects/g/nirdizati-research/predict-python/context:python"><img alt="Language grade: Python master" src="https://img.shields.io/lgtm/grade/python/g/nirdizati-research/predict-python.svg?logo=lgtm&amp;logoWidth=18" /></a></p>
<p>Development</p>
<p><a class="reference external" href="https://travis-ci.org/nirdizati-research/predict-python"><img alt="Build Status development" src="https://travis-ci.org/nirdizati-research/predict-python.svg?branch=development" /></a> <a class="reference external" href="https://codecov.io/gh/nirdizati-research/predict-python"><img alt="Coverage Status development" src="https://codecov.io/gh/nirdizati-research/predict-python/branch/development/graph/badge.svg" /></a></p>
<p>Django backend server for machine learning on event logs.</p>
<div class="section" id="running-in-a-new-environment">
<h2>Running in a new environment<a class="headerlink" href="#running-in-a-new-environment" title="Permalink to this headline">¶</a></h2>
<p>The docker build is available &#64; <a class="reference external" href="https://hub.docker.com/r/nirdizatiresearch/predict-python/">https://hub.docker.com/r/nirdizatiresearch/predict-python/</a> in any case if you prefer to setup your environment on your own you can refer the <a class="reference external" href="Dockerfile">Dockerfile</a>.</p>
</div>
<div class="section" id="docker-compose">
<h2>Docker Compose<a class="headerlink" href="#docker-compose" title="Permalink to this headline">¶</a></h2>
<p>On first run to setup the database, you can run:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">run</span> <span class="n">server</span> <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</pre></div>
</div>
<p>To run the project:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span> <span class="n">redis</span> <span class="n">server</span> <span class="n">scheduler</span> <span class="n">worker</span>
</pre></div>
</div>
<p>To access a generic remote Django server you can use the ssh tunneling functionality as shown in the following sample:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">-</span><span class="n">L</span> <span class="mi">8000</span><span class="p">:</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;@&lt;</span><span class="n">host</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="run-an-instance-of-the-project">
<h2>Run an instance of the project<a class="headerlink" href="#run-an-instance-of-the-project" title="Permalink to this headline">¶</a></h2>
<p>If you are familiar with docker-compose the <a class="reference external" href="docker-compose.yml">docker-compose</a> file is available, otherwise if you use PyCharm as IDE run the provided configurations. Finally, from the command line you can use the following sample commands to interact with our software.</p>
<p>Start server with</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span>
</pre></div>
</div>
<p>Run tests with one of the following</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python manage.py test
./manage.py test
</pre></div>
</div>
<p>NB: always run a redis-server in background if you want your server to
accept any incoming post requests!</p>
<p>Start by running migrations and adding sample data</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python manage.py migrate
python manage.py loaddata &lt;your_file.json&gt;
</pre></div>
</div>
<p>Start jobs from command line</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>curl --request POST \
  --header &#39;Content-Type: application/json&#39; \
  --data-binary &#39;{
    &quot;type&quot;: &quot;classification&quot;,
    &quot;split_id&quot;: 1,
    &quot;config&quot;: {
      &quot;encodings&quot;: [&quot;simpleIndex&quot;],
      &quot;clusterings&quot;: [&quot;noCluster&quot;],
      &quot;methods&quot;: [&quot;randomForest&quot;],
      &quot;label&quot;: {&quot;type&quot;: &quot;remaining_time&quot;},
      &quot;encoding&quot;: {&quot;prefix_length&quot;: 3, &quot;generation_type&quot;: &quot;only&quot;, &quot;padding&quot;: &quot;zero_padding&quot;}
    }
  }&#39; \
http://localhost:8000/jobs/multiple
</pre></div>
</div>
<p>Creating a single split options.</p>
<ul class="simple">
<li>$SPLIT_TYPE has to be one of <code class="docutils literal notranslate"><span class="pre">split_sequential</span></code>, <code class="docutils literal notranslate"><span class="pre">split_random</span></code>,
<code class="docutils literal notranslate"><span class="pre">split_temporal</span></code>, <code class="docutils literal notranslate"><span class="pre">split_strict_temporal</span></code>. By default
<code class="docutils literal notranslate"><span class="pre">split_sequential</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">test_size</span></code> has to be from 0 to 1. By default 0.2</li>
</ul>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span>curl --request POST \
 --header &#39;Content-Type: application/json&#39; \
 --data-binary &#39;{
   &quot;type&quot;: &quot;single&quot;,
   &quot;original_log&quot;: 1,
   &quot;config&quot;: {
     &quot;test_size&quot;: 0.2,
     &quot;split_type&quot;: $SPLIT_TYPE
   }
 }&#39; \
http://localhost:8000/splits/
</pre></div>
</div>
</div>
<div class="section" id="advanced-configuration">
<h2>Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">¶</a></h2>
<p>Prediction methods accept configuration for sklearn classification/regression methods. The Job config must contain a dict with only the supported options for that method. The dict name must take the format “type.method”. For classification randomForest this would be <code class="docutils literal notranslate"><span class="pre">classification.randomForest</span></code>. Advanced configuration is optional. Look at <code class="docutils literal notranslate"><span class="pre">jobs/job_creator.py</span></code> for default values. For example, the configuration for classification KNN would have to be like:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">request</span> <span class="n">POST</span> \
  <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> \
  <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="n">binary</span> <span class="s1">&#39;{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;classification&quot;</span><span class="p">,</span>
    <span class="s2">&quot;split_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;encodings&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;simpleIndex&quot;</span><span class="p">],</span>
      <span class="s2">&quot;clusterings&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;noCluster&quot;</span><span class="p">],</span>
      <span class="s2">&quot;methods&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;knn&quot;</span><span class="p">],</span>
      <span class="s2">&quot;classification.knn&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;n_neighbors&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s2">&quot;weights&quot;</span><span class="p">:</span> <span class="s2">&quot;uniform&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;remaining_time&quot;</span><span class="p">},</span>
      <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;prefix_length&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;generation_type&quot;</span><span class="p">:</span> <span class="s2">&quot;up_to&quot;</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span><span class="p">:</span> <span class="s2">&quot;no_padding&quot;</span><span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="s1">&#39; </span><span class="se">\</span>
<span class="s1">http://localhost:8000/jobs/multiple</span>
</pre></div>
</div>
</div>
<div class="section" id="labelling-job">
<h2>Labelling job<a class="headerlink" href="#labelling-job" title="Permalink to this headline">¶</a></h2>
<p>Log encoding and labelling can be tested before prediction. It supports all the same values as classification and regression jobs but the method and clustering.</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">--</span><span class="n">request</span> <span class="n">POST</span> \
  <span class="o">--</span><span class="n">header</span> <span class="s1">&#39;Content-Type: application/json&#39;</span> \
  <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="n">binary</span> <span class="s1">&#39;{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;labelling&quot;</span><span class="p">,</span>
    <span class="s2">&quot;split_id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;remaining_time&quot;</span><span class="p">},</span>
      <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;prefix_length&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;generation_type&quot;</span><span class="p">:</span> <span class="s2">&quot;up_to&quot;</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span><span class="p">:</span> <span class="s2">&quot;no_padding&quot;</span><span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span><span class="s1">&#39; </span><span class="se">\</span>
<span class="s1">http://localhost:8000/jobs/multiple</span>
</pre></div>
</div>
</div>
<div class="section" id="contributors">
<h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://github.com/stebranchi">&#64;stebranchi</a> Stefano Branchi</li>
<li><a class="reference external" href="https://github.com/dfmchiara">&#64;dfmchiara</a> Chiara Di Francescomarino</li>
<li><a class="reference external" href="https://github.com/TKasekamp">&#64;TKasekamp</a> Tõnis Kasekamp</li>
<li><a class="reference external" href="https://github.com/mrsonuk">&#64;mrsonuk</a> Santosh Kumar</li>
<li><a class="reference external" href="https://github.com/fmmaggi">&#64;fmmaggi</a> Fabrizio Maggi</li>
<li><a class="reference external" href="https://github.com/WilliamsRizzi">&#64;WilliamsRizzi</a> Williams Rizzi</li>
<li><a class="reference external" href="https://github.com/HitLuca">&#64;HitLuca</a> Luca Simonetto</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="readme_frontend.html" class="btn btn-neutral float-right" title="Nirdizati Research frontend" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="Nirdizati Research" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Stefano Branchi, Chiara Di Francescomarino, Tõnis Kasekamp, Santosh Kumar, Fabrizio Maggi, Williams Rizzi, Luca Simonetto

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>